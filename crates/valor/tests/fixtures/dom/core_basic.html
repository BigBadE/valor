<!doctype html>
<meta charset="utf-8">
<title>DOM Core Basic</title>
<body>
  <ul id="list"></ul>
  <div id="out"></div>
  <div id="len"></div>
  <script>
  document.addEventListener('DOMContentLoaded', function(){
    var list = document.getElementById('list');
    // Build three items via a DocumentFragment
    var frag = document.createDocumentFragment();
    function liWith(text) {
      var li = document.createElement('li');
      li.className = 'item';
      li.appendChild(document.createTextNode(String(text)));
      return li;
    }
    var li1 = liWith('a');
    var li2 = liWith('b');
    var li3 = liWith('c');
    frag.appendChild(li1);
    frag.appendChild(li2);
    frag.appendChild(li3);
    list.appendChild(frag);

    // Insert a new item before the second
    var before = document.createElement('li');
    before.textContent = 'before';
    list.insertBefore(before, li2);

    // Replace the third with a deep clone of the first
    var clone = li1.cloneNode(true);
    list.replaceChild(clone, li3);

    // ClassList and dataset tweaks
    li2.classList.add('selected');
    li2.dataset.foo = 'bar';

    // Queries
    var items = document.getElementsByClassName('item');
    var joined = '';
    for (var i = 0; i < items.length; i++) {
      joined += (i ? '|' : '') + items[i].textContent;
    }
    document.getElementById('out').textContent = joined;
    document.getElementById('len').textContent = String(items.length);
  });
  </script>
</body>
