<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Modules Basic</title>
  <style> html, body { margin:0; padding:0; } </style>
</head>
<body>
  <script>
    window._valorRun = async function() {
      try {
        const src = 'export const X = 42; export function add(a,b){ return a+b; }';
        const blob = new Blob([src], { type: 'text/javascript' });
        const url = URL.createObjectURL(blob);
        const mod = await import(url);
        _valorAssert('module export value', mod.X === 42, 'X='+mod.X);
        _valorAssert('module export function', typeof mod.add === 'function' && mod.add(2,3) === 5, 'add result');
        URL.revokeObjectURL(url);
      } catch (e) {
        _valorAssert('modules-basic-exception', false, String(e && e.stack || e));
      }
    };
  </script>
</body>
</html>
