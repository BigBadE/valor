<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Hit Test</title>
  <style>
    html, body { margin: 0; padding: 0; }
    #outer { position: relative; width: 300px; height: 200px; background: #eee; }
    #a { position: absolute; left: 20px; top: 20px; width: 120px; height: 80px; background: #acf; }
    #b { position: absolute; left: 60px; top: 50px; width: 120px; height: 80px; background: rgba(255,200,200,0.9); }
  </style>
</head>
<body>
  <div id="outer">
    <div id="a"></div>
    <div id="b"></div>
  </div>
  <script>
    window._valorRun = function() {
      try {
        const rectA = document.getElementById('a').getBoundingClientRect();
        const rectB = document.getElementById('b').getBoundingClientRect();
        const x = rectB.left + 5;
        const y = rectB.top + 5;
        const el = document.elementFromPoint(x, y);
        _valorAssert('elementFromPoint returns topmost (#b)', el && el.id === 'b', 'got='+(el && el.id));
      } catch (e) {
        _valorAssert('hit-test-exception', false, String(e && e.stack || e));
      }
    };
  </script>
</body>
</html>
