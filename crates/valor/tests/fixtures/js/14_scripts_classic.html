<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Scripts Classic</title>
  <style> html, body { margin:0; padding:0; } </style>
  <script>
    // Classic script executes during parsing
    window.__classic_log = (window.__classic_log || []);
    window.__classic_log.push('head-script');
    window.globalVar = 1;
  </script>
</head>
<body>
  <div id="root"></div>
  <script>
    window.__classic_log.push('body-script-1');
    window.globalVar += 1;
  </script>
  <script>
    window._valorRun = function() {
      try {
        // Classic scripts execute in document order synchronously during parse
        const log = window.__classic_log || [];
        // Expect at least the two push events in order
        const okOrder = (log.length >= 2 && log[0] === 'head-script' && log[1] === 'body-script-1');
        _valorAssert('classic script order', okOrder, 'log='+log.join(','));
        _valorAssert('globalVar incremented', window.globalVar === 2, 'globalVar='+window.globalVar);
      } catch (e) {
        _valorAssert('scripts-classic-exception', false, String(e && e.stack || e));
      }
    };
  </script>
</body>
</html>
