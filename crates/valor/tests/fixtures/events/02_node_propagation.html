<!doctype html>
<meta charset="utf-8">
<title>Events Node Propagation</title>
<div id="a"><div id="b"><div id="c">target</div></div></div>
<div id="out"></div>
<script>
 document.addEventListener('DOMContentLoaded', function(){
   var d = document;
   var a = d.getElementById('a');
   var b = d.getElementById('b');
   var c = d.getElementById('c');
   var out = d.getElementById('out');
   function push(s){ var cur = out.textContent || ''; out.textContent = cur ? (cur + '|' + s) : s; }
   // Document capture and bubble
   d.addEventListener('ping', function(){ push('Dcap'); }, {capture:true});
   d.addEventListener('ping', function(){ push('Dbub'); });
   // Ancestor capture
   a.addEventListener('ping', function(){ push('Acap'); }, {capture:true});
   b.addEventListener('ping', function(){ push('Bcap'); }, {capture:true});
   // Target capture and bubble
   c.addEventListener('ping', function(){ push('Tcap'); }, {capture:true});
   c.addEventListener('ping', function(){ push('Tbub'); });
   // Ancestor bubble
   b.addEventListener('ping', function(){ push('Bbub'); });
   a.addEventListener('ping', function(){ push('Abub'); });
   // Dispatch
   c.dispatchEvent({type:'ping'});
 });
</script>
